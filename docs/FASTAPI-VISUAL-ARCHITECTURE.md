# FastAPI Real-time Ingestion - Visual Architecture

## System Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           USER INTERFACE                                 â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  Streamlit UI  â”‚                    â”‚   Future: React â”‚             â”‚
â”‚  â”‚  (Port 8501)   â”‚                    â”‚   (Port 3000)   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚           â”‚                                     â”‚                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                                     â”‚
            â”‚ HTTP POST /api/v1/ingest            â”‚
            â”‚ HTTP GET  /api/v1/ingest/{id}       â”‚
            â”‚ SSE GET   /api/v1/stream/{id}       â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FASTAPI BACKEND                                â”‚
â”‚                         (Port 8000)                                    â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    API ROUTER LAYER                          â”‚    â”‚
â”‚  â”‚                                                              â”‚    â”‚
â”‚  â”‚  POST /api/v1/ingest          â”‚  Submit URL, get job_id    â”‚    â”‚
â”‚  â”‚  GET  /api/v1/ingest/{id}     â”‚  Poll job status           â”‚    â”‚
â”‚  â”‚  GET  /api/v1/stream/{id}     â”‚  SSE real-time stream      â”‚    â”‚
â”‚  â”‚  GET  /api/v1/library         â”‚  List library items        â”‚    â”‚
â”‚  â”‚                                                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              INGESTION SERVICE LAYER                         â”‚    â”‚
â”‚  â”‚                                                              â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚  IngestionOrchestrator                              â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ submit_job(url) â†’ job_id                         â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ get_job_status(job_id) â†’ status_dict            â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ _process_job(job_id, url, tracker)              â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ active_jobs: Dict[UUID, ProgressTracker]        â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â”‚                     â”‚                                       â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚  ProgressTracker                                     â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ emit(event_type, stage, message, percent)        â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ job_started(url)                                 â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ stage_started(stage)                             â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ stage_progress(stage, percent, message)          â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ stage_completed(stage, duration_ms)              â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ job_completed(result)                            â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ error(stage, error_message)                      â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ callbacks: List[Callable]                        â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ events: List[ProgressEvent]                      â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â”‚                                                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                             â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ Calls pipeline.run()
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXISTING PIPELINE LAYER                             â”‚
â”‚                    (No changes needed)                                 â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ContentPipeline                                             â”‚    â”‚
â”‚  â”‚                                                              â”‚    â”‚
â”‚  â”‚  async def run(url):                                         â”‚    â”‚
â”‚  â”‚    1. raw = await extractor.extract(url)    â† EXTRACT       â”‚    â”‚
â”‚  â”‚    2. processed = await transformer.transform(raw) â† TRANSFORMâ”‚   â”‚
â”‚  â”‚    3. file = await loader.load(processed)   â† LOAD           â”‚    â”‚
â”‚  â”‚    return PipelineResult(raw, processed, file)               â”‚    â”‚
â”‚  â”‚                                                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                         â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ Reads/Writes
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       DATA LAYER (Docker Compose)                       â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  PostgreSQL   â”‚  â”‚     Redis     â”‚  â”‚    Qdrant     â”‚  â”‚  MinIO   â”‚â”‚
â”‚  â”‚  (Port 5432)  â”‚  â”‚  (Port 6379)  â”‚  â”‚  (Port 6333)  â”‚  â”‚ (Port    â”‚â”‚
â”‚  â”‚               â”‚  â”‚               â”‚  â”‚               â”‚  â”‚  9000)   â”‚â”‚
â”‚  â”‚  â€¢ Metadata   â”‚  â”‚  â€¢ Job state  â”‚  â”‚  â€¢ Vectors    â”‚  â”‚ â€¢ Files  â”‚â”‚
â”‚  â”‚  â€¢ History    â”‚  â”‚  â€¢ Cache      â”‚  â”‚  â€¢ Embeddings â”‚  â”‚ â€¢ Tiers  â”‚â”‚
â”‚  â”‚  â€¢ Stats      â”‚  â”‚  â€¢ Sessions   â”‚  â”‚  â€¢ Search     â”‚  â”‚ â€¢ Backup â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## SSE Event Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser    â”‚                â”‚    FastAPI   â”‚                â”‚  Orchestratorâ”‚
â”‚  (Streamlit) â”‚                â”‚   /stream    â”‚                â”‚   Pipeline   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                               â”‚                               â”‚
       â”‚ GET /api/v1/stream/{job_id}   â”‚                               â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                               â”‚
       â”‚                               â”‚                               â”‚
       â”‚      Connection Established   â”‚                               â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                               â”‚
       â”‚                               â”‚                               â”‚
       â”‚                               â”‚   Register event callback     â”‚
       â”‚                               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                               â”‚                               â”‚
       â”‚                               â”‚                               â”‚ Extract stage
       â”‚                               â”‚   event: job_started          â”‚ begins
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚ data: {"job_id": "...", ...}  â”‚                               â”‚
       â”‚                               â”‚                               â”‚
       â”‚                               â”‚   event: stage_started        â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚ data: {"stage": "extract"}    â”‚                               â”‚
       â”‚                               â”‚                               â”‚
       â”‚                               â”‚   event: stage_progress       â”‚ Downloading
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ content
       â”‚ data: {"percent": 25, ...}    â”‚                               â”‚
       â”‚                               â”‚                               â”‚
       â”‚                               â”‚   event: stage_completed      â”‚ Extract done
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚ data: {"duration_ms": 3200}   â”‚                               â”‚
       â”‚                               â”‚                               â”‚
       â”‚                               â”‚   event: stage_started        â”‚ Transform
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ begins
       â”‚ data: {"stage": "transform"}  â”‚                               â”‚
       â”‚                               â”‚                               â”‚
       â”‚         (15 seconds pass)     â”‚                               â”‚
       â”‚                               â”‚                               â”‚
       â”‚   event: heartbeat            â”‚                               â”‚ Keep-alive
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                               â”‚
       â”‚ data: {"timestamp": ...}      â”‚                               â”‚
       â”‚                               â”‚                               â”‚
       â”‚                               â”‚   event: stage_completed      â”‚ Transform
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ done
       â”‚ data: {"duration_ms": 5400}   â”‚                               â”‚
       â”‚                               â”‚                               â”‚
       â”‚                               â”‚   event: stage_started        â”‚ Load begins
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚ data: {"stage": "load"}       â”‚                               â”‚
       â”‚                               â”‚                               â”‚
       â”‚                               â”‚   event: stage_completed      â”‚ Load done
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚ data: {"duration_ms": 1200}   â”‚                               â”‚
       â”‚                               â”‚                               â”‚
       â”‚                               â”‚   event: job_completed        â”‚ All done!
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚ data: {"result": {...}}       â”‚                               â”‚
       â”‚                               â”‚                               â”‚
       â”‚      Connection Closed        â”‚                               â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                               â”‚
       â”‚                               â”‚                               â”‚
```

---

## TDD Workflow Diagram

```
                    RED-GREEN-REFACTOR CYCLE
                            
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ”´ RED PHASE                             â”‚
â”‚                                                             â”‚
â”‚  1. Write Test First (test_feature.py)                     â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚     â”‚ def test_feature():                         â”‚        â”‚
â”‚     â”‚     result = feature()                      â”‚        â”‚
â”‚     â”‚     assert result == expected               â”‚        â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                             â”‚
â”‚  2. Run Test                                               â”‚
â”‚     $ pytest tests/test_feature.py                         â”‚
â”‚                                                             â”‚
â”‚  3. Verify FAILS âŒ                                        â”‚
â”‚     ImportError: No module 'feature'                       â”‚
â”‚                                                             â”‚
â”‚  4. Commit                                                 â”‚
â”‚     $ git commit -m "RED: Test feature implementation"     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸŸ¢ GREEN PHASE                           â”‚
â”‚                                                             â”‚
â”‚  1. Write MINIMAL Code (feature.py)                        â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚     â”‚ def feature():                              â”‚        â”‚
â”‚     â”‚     return expected  # Simplest possible    â”‚        â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                             â”‚
â”‚  2. Run Test                                               â”‚
â”‚     $ pytest tests/test_feature.py                         â”‚
â”‚                                                             â”‚
â”‚  3. Verify PASSES âœ…                                       â”‚
â”‚     test_feature.py::test_feature PASSED                   â”‚
â”‚                                                             â”‚
â”‚  4. Commit                                                 â”‚
â”‚     $ git commit -m "GREEN: Implement feature"             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ğŸ”„ REFACTOR PHASE                         â”‚
â”‚                                                             â”‚
â”‚  1. Improve Code Quality                                   â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚     â”‚ def feature():                              â”‚        â”‚
â”‚     â”‚     # Better implementation                 â”‚        â”‚
â”‚     â”‚     result = calculate_properly()           â”‚        â”‚
â”‚     â”‚     return validate(result)                 â”‚        â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                             â”‚
â”‚  2. Run ALL Tests                                          â”‚
â”‚     $ pytest                                               â”‚
â”‚                                                             â”‚
â”‚  3. Verify Still PASSES âœ…                                 â”‚
â”‚     465 tests passed                                       â”‚
â”‚                                                             â”‚
â”‚  4. Commit                                                 â”‚
â”‚     $ git commit -m "REFACTOR: Improve feature clarity"    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Next Feature â”‚
                    â”‚  (RED phase)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Real Services Integration Test Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  INTEGRATION TEST EXECUTION                         â”‚
â”‚                  (NO MOCKS - Real Services)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Test: test_post_ingest_creates_job_in_real_redis

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Test Client â”‚      â”‚   FastAPI    â”‚      â”‚ Real Redis   â”‚
â”‚   (httpx)    â”‚      â”‚   Server     â”‚      â”‚  (Docker)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                     â”‚                     â”‚
       â”‚ POST /api/v1/ingest â”‚                     â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚
       â”‚                     â”‚                     â”‚
       â”‚                     â”‚ REAL: set_json()    â”‚
       â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                     â”‚                     â”‚
       â”‚                     â”‚   REAL: Success     â”‚
       â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                     â”‚                     â”‚
       â”‚   202 Accepted      â”‚                     â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚
       â”‚ {"job_id": "..."}   â”‚                     â”‚
       â”‚                     â”‚                     â”‚
       â”‚                     â”‚                     â”‚
       â”‚  TEST: Verify in Redis                    â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                     â”‚                     â”‚
       â”‚  REAL: get_json(job_id)                   â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚  {"status": "queued", ...}                â”‚
       â”‚                     â”‚                     â”‚
       âœ… ASSERT job_data["status"] == "queued"    â”‚
       â”‚                     â”‚                     â”‚

Result: Test PASSES âœ… because it verified REAL Redis storage
```

---

## Progress Tracking State Machine

```
                         INGESTION JOB LIFECYCLE
                                
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ QUEUED  â”‚  Job created, waiting to start
  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
       â”‚ _process_job() called
       â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ EXTRACT â”‚  Stage: Fetching content from URL
  â”‚         â”‚  Events: stage_started, stage_progress, stage_completed
  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
       â”‚ extractor.extract() completes
       â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ TRANSFORM   â”‚  Stage: Processing with AI (summarize, extract metadata)
  â”‚             â”‚  Events: stage_started, stage_progress, stage_completed
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚ transformer.transform() completes
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  LOAD   â”‚  Stage: Store in library (MinIO, Qdrant, PostgreSQL)
  â”‚         â”‚  Events: stage_started, stage_completed
  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
       â”‚ loader.load() completes
       â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ COMPLETED â”‚  Success! Result contains file_path, title, tier, quality_score
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  
  
  ERROR PATH:
  Any stage â”€â”€[Exception]â”€â”€> â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ FAILED â”‚  Error captured in Redis with stage and message
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## File Structure Tree

```
williams-librarian/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/                          # NEW: FastAPI backend
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ main.py                   # FastAPI app factory
â”‚   â”‚   â””â”€â”€ routers/
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â””â”€â”€ ingestion.py          # Ingestion endpoints
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                     # NEW: Service layer
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ ingestion_service.py      # IngestionOrchestrator, ProgressTracker
â”‚   â”‚
â”‚   â”œâ”€â”€ pipeline/                     # EXISTING: No changes
â”‚   â”‚   â”œâ”€â”€ cli.py
â”‚   â”‚   â”œâ”€â”€ etl.py
â”‚   â”‚   â”œâ”€â”€ extractors/
â”‚   â”‚   â”œâ”€â”€ transformers/
â”‚   â”‚   â””â”€â”€ loaders/
â”‚   â”‚
â”‚   â”œâ”€â”€ repositories/                 # EXISTING: Used by orchestrator
â”‚   â”‚   â”œâ”€â”€ redis_repository.py
â”‚   â”‚   â”œâ”€â”€ postgres_repository.py
â”‚   â”‚   â”œâ”€â”€ qdrant_repository.py
â”‚   â”‚   â””â”€â”€ minio_repository.py
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                         # EXISTING: Shared models
â”‚   â”‚   â”œâ”€â”€ models.py
â”‚   â”‚   â””â”€â”€ config.py
â”‚   â”‚
â”‚   â””â”€â”€ presentation/                 # EXISTING: Streamlit UI
â”‚       â””â”€â”€ streamlit_app.py
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ unit/
â”‚   â”‚   â”œâ”€â”€ api/                      # NEW: API model tests
â”‚   â”‚   â”‚   â”œâ”€â”€ test_ingest_request.py
â”‚   â”‚   â”‚   â””â”€â”€ test_ingest_response.py
â”‚   â”‚   â””â”€â”€ services/                 # NEW: Service logic tests
â”‚   â”‚       â”œâ”€â”€ test_progress_tracker.py
â”‚   â”‚       â””â”€â”€ test_ingestion_stage.py
â”‚   â”‚
â”‚   â”œâ”€â”€ integration/
â”‚   â”‚   â”œâ”€â”€ api/                      # NEW: Real HTTP tests
â”‚   â”‚   â”‚   â”œâ”€â”€ test_ingest_endpoint_real.py
â”‚   â”‚   â”‚   â”œâ”€â”€ test_job_status_endpoint_real.py
â”‚   â”‚   â”‚   â””â”€â”€ test_sse_streaming_real.py
â”‚   â”‚   â””â”€â”€ services/                 # NEW: Real pipeline tests
â”‚   â”‚       â”œâ”€â”€ test_orchestrator_real_pipeline.py
â”‚   â”‚       â””â”€â”€ test_orchestrator_redis_integration.py
â”‚   â”‚
â”‚   â””â”€â”€ e2e/
â”‚       â””â”€â”€ api/                      # NEW: Full flow tests
â”‚           â””â”€â”€ test_full_ingestion_flow.py
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ FASTAPI-INGESTION-ARCHITECTURE.md       # Complete architecture
â”‚   â”œâ”€â”€ SPRINT-5-TDD-PLAN.md                    # Day-by-day plan
â”‚   â”œâ”€â”€ FASTAPI-IMPLEMENTATION-SUMMARY.md       # Quick reference
â”‚   â””â”€â”€ FASTAPI-VISUAL-ARCHITECTURE.md          # This file
â”‚
â”œâ”€â”€ pyproject.toml                    # Dependencies (add fastapi, uvicorn)
â”œâ”€â”€ docker-compose.yml                # EXISTING: Services already running
â””â”€â”€ README.md
```

---

## Component Interaction Matrix

| From â†“ To â†’     | ProgressTracker | Orchestrator | FastAPI Router | ContentPipeline | Redis | Qdrant | MinIO |
|-----------------|-----------------|--------------|----------------|-----------------|-------|--------|-------|
| **FastAPI Router** | Read (get_tracker) | Call (submit_job, get_job_status) | - | - | - | - | - |
| **Orchestrator** | Create, Write | - | - | Call (run) | Write (job state) | - | - |
| **ProgressTracker** | - | Callback | - | - | - | - | - |
| **ContentPipeline** | - | - | - | - | - | Write (vectors) | Write (files) |
| **SSE Handler** | Read (events) | Call (get_tracker) | - | - | - | - | - |

---

## Test Coverage Heatmap

```
Layer                    Unit Tests   Integration Tests   E2E Tests   Total
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ProgressTracker          10 tests     -                   -           10
IngestionStage           3 tests      -                   -           3
ProgressEvent            5 tests      -                   -           5
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
IngestionOrchestrator    -            8 tests             -           8
Pipeline Integration     -            5 tests             2 tests     7
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
POST /ingest             2 tests      6 tests             1 test      9
GET /ingest/{id}         2 tests      4 tests             1 test      7
GET /stream/{id}         -            10 tests            1 test      11
GET /library             3 tests      3 tests             -           6
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL                    25 tests     36 tests            5 tests     66 tests

Coverage:                100%         90%+                80%+        95%+
```

---

## Deployment Architecture

```
                    PRODUCTION DEPLOYMENT
                                
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Load Balancer                        â”‚
â”‚                    (Nginx / AWS ALB)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FastAPI Worker â”‚     â”‚  FastAPI Worker â”‚
â”‚  (uvicorn)      â”‚     â”‚  (uvicorn)      â”‚
â”‚  Port 8000      â”‚     â”‚  Port 8001      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Streamlit UI   â”‚     â”‚  React/Vue UI   â”‚
â”‚  Port 8501      â”‚     â”‚  Port 3000      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                 â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PostgreSQL â”‚  â”‚  Redis   â”‚  â”‚  Qdrant  â”‚  â”‚ MinIO  â”‚
â”‚  (RDS)     â”‚  â”‚ (Elasticaâ”‚  â”‚ (Cloud)  â”‚  â”‚ (S3)   â”‚
â”‚            â”‚  â”‚  che)    â”‚  â”‚          â”‚  â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Metrics & Monitoring:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Prometheus  â”‚â†’ â”‚  Grafana    â”‚  â”‚    Logs     â”‚
â”‚ (Metrics)   â”‚  â”‚ (Dashboard) â”‚  â”‚ (CloudWatch)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This visual documentation complements the detailed architecture and implementation plan documents! ğŸ¨
